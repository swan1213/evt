{"version":3,"file":"race.js","sourceRoot":"","sources":["../../../src/lib/util/race.ts"],"names":[],"mappings":"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"}